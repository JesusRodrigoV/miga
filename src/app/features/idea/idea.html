<h2>Parte 1: Idea de Negocio</h2>

<form [formGroup]="form" (ngSubmit)="onSubmit()" class="space-y-4">
  <mg-textarea
    label="Fortalezas"
    formControlName="fortalezas"
    [rows]="3"
    [invalid]="isInvalid('fortalezas')"
    errorMessage="Fortalezas son requeridas."
  />

  <mg-textarea
    label="Oportunidades"
    formControlName="oportunidades"
    [rows]="3"
    [invalid]="isInvalid('oportunidades')"
    errorMessage="Oportunidades son requeridas."
  />

  <mg-textarea
    label="Idea de negocio"
    formControlName="ideaNegocio"
    [rows]="3"
    [invalid]="isInvalid('ideaNegocio')"
    errorMessage="La idea de negocio es requerida."
  />

  <mg-input
    label="Nombre del negocio"
    formControlName="nombreNegocio"
    type="text"
    [invalid]="isInvalid('nombreNegocio')"
    errorMessage="El nombre del negocio es requerido."
  />

  <mg-textarea
    label="Propuesta de valor"
    formControlName="propuestaValor"
    [rows]="3"
    [invalid]="isInvalid('propuestaValor')"
    errorMessage="La propuesta de valor es requerida."
  />

  <mg-textarea
    label="MotivaciÃ³n"
    formControlName="motivacion"
    [rows]="3"
    [invalid]="isInvalid('motivacion')"
    errorMessage="La motivaciÃ³n es requerida."
  />

  <mg-button
    (click)="onSubmit()"
    [disabled]="form.invalid || store.isLoading()"
    [fluid]="false"
  >
    @if(store.isLoading()) {
    <mg-loader />
    } @else {
    <span>Guardar</span>
    }
  </mg-button>
</form>

@if (store.isSaved()) {
<mg-button
  label="ðŸ‘‰ Siguiente: Objetivo SMART â†’"
  [routerLink]="['/objetivo']"
  [queryParams]="{ planId: store.planId() }"
  severity="secondary"
  [fluid]="false"
/>
}
