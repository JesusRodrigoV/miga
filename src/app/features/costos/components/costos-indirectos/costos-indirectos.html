<h2>Costos Indirectos</h2>

<form [formGroup]="form" (ngSubmit)="onSubmit()" class="space-y-4">
  <div formArrayName="indirectos">
    @for (ind of indirectos.controls; track ind; let i = $index) {
    <div [formGroupName]="i" class="border p-4 mb-4">
      <h4>Item {{ i + 1 }}</h4>

      <label>Descripción</label>
      <input formControlName="descripcion" type="text" />

      <label>Costo mensual</label>
      <input formControlName="costoMensual" type="number" />

      <label>Días calculados</label>
      <input formControlName="diasCalculados" type="number" />

      <label>Costo por día</label>
      <input formControlName="costoPorDia" type="number" [disabled]="true" />

      <label>Costo por hora</label>
      <input formControlName="costoPorHora" type="number" [disabled]="true" />

      <label>Horas requeridas</label>
      <input formControlName="horasRequeridas" type="number" />

      <label>Costo neto</label>
      <input formControlName="costoNeto" type="number" [disabled]="true" />

      <button type="button" (click)="removeIndirecto(i)">Eliminar</button>
    </div>
    }
  </div>

  <button type="button" (click)="addIndirecto()">+ Agregar Item</button>
  <button type="submit" [disabled]="form.invalid">Guardar</button>
</form>

@if (msg) {
<div>{{ msg }}</div>
}

<h3>Resumen</h3>
<table>
  <tr>
    <th>Total mensual</th>
    <th>Total por día</th>
    <th>Total por hora</th>
    <th>Total horas requeridas</th>
    <th>Total costo neto</th>
  </tr>
  <tr>
    <td>{{ totalCostoMensual | number: '1.2-2' }}</td>
    <td>{{ totalCostoPorDia | number: '1.2-2' }}</td>
    <td>{{ totalCostoPorHora | number: '1.2-2' }}</td>
    <td>{{ totalHorasRequeridas | number: '1.2-2' }}</td>
    <td>{{ totalCostoNeto | number: '1.2-2' }}</td>
  </tr>
</table>
