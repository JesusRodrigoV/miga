<h2>Registro e Ingreso</h2>

<form [formGroup]="form" (ngSubmit)="onSubmit()">
  <mg-input
    label="Nombre"
    formControlName="nombre"
    [invalid]="(form.get('nombre')?.invalid && form.get('nombre')?.touched) ?? false"
  />
  @if( form.get('nombre')?.invalid && form.get('nombre')?.touched ){
  <div>Nombre es requerido.</div>
  }

  <mg-input
    label="Apellido"
    formControlName="apellido"
    [invalid]="(form.get('apellido')?.invalid && form.get('apellido')?.touched) ?? false"
  />
  @if( form.get('apellido')?.invalid && form.get('apellido')?.touched ){
  <div>Un apellido es requerido.</div>
  }

  <mg-input
    label="Correo electrónico"
    type="email"
    formControlName="email"
    [invalid]="(form.get('email')?.invalid && form.get('email')?.touched) ?? false"
  />
  @if( form.get('email')?.invalid && form.get('email')?.touched ){
  <div>Un correo electrónico es requerido.</div>
  }

  <mg-password
    label="Contraseña"
    formControlName="password"
    [showMeter]="true"
    [invalid]="(form.get('password')?.invalid && form.get('password')?.touched) ?? false"
  />
  @if(form.get('password')?.invalid && form.get('password')?.touched){
  <div>Contraseña inválida.</div>
  }

  <mg-button
    label="Crear cuenta e ingresar"
    [loading]="authStore.isLoading()"
    [disabled]="form.invalid"
    (onClick)="onSubmit()"
    [fluid]="false"
  />

  <mg-button
    label="Ya tengo cuenta"
    routerLink="/login"
    [buttonProps]="{ type: 'button' }"
    [disabled]="authStore.isLoading()"
    severity="secondary"
    [fluid]="false"
  />

  @if(msg){
  <p>{{ msg }}</p>
  }
</form>
